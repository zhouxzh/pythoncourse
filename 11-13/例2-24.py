import csvfrom operator import subfrom random import choicesfrom datetime import date, timedeltaimport pandas as pd# 不同类别包含的食物foods_category = {'蛋白质': ('牛排','火腿','鸡肉','鱼'),                  '碳水化合物': ('面包','米饭','苹果','马铃薯','芒果')}# 不同食物所属的类别foods_category_reversed = {f: k                           for k, v in foods_category.items()                           for f in v}# 包含所有食物名称的元组foods = sum(foods_category.values(), ())# 生成数据写入文件，模拟小明连续100天一日三餐的食物file_path = 'data_foods.csv'with open(file_path, 'w', encoding='utf8', newline='') as fp:    fp_csv = csv.writer(fp)    fp_csv.writerow(('日期','一日三餐'))    start = date(2022, 11, 1)    for _ in range(100):        fp_csv.writerow((str(start), ','.join(choices(foods,k=3))))        start = start + timedelta(days=1)# 读取数据df = pd.read_csv(file_path, encoding='utf8')df['一日三餐'] = df['一日三餐'].str.split(',')df = df.explode('一日三餐', ignore_index=True).drop('日期', axis=1)# 下面两种方式是等价的# 方法一dft = df.groupby(by=lambda i: foods_category_reversed[df.at[i,'一日三餐']]).count()diff = abs(sub(*dft['一日三餐'].values))print(diff, '营养均衡' if diff<30 else '营养不均衡', sep='：')# 方法二df['一日三餐'] = df['一日三餐'].map(foods_category_reversed)# .value_counts()的统计结果默认降序排列# 输出两大类食物的食用次数之差diff = sub(*df['一日三餐'].value_counts().values)print(diff, '营养均衡' if diff<30 else '营养不均衡', sep='：')